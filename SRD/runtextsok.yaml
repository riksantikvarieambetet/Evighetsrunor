openapi: 3.0.2
info:
  title: Samnordisk runtextdatabas söktjänst API
  description: Samnordisk runtextdatabas (SRD) söktjänst API. Specification för Riksantikvarieämbetets
    forskningsplattform för runor inom projektet Evighetsrunor. API:et används för
    att hitta och söka i runtexter i SRD. Sökresultaten innehåller endast grundinformationen
    om runtexterna (id:n, text och geografiska koordinater). Ytterligare metadata
    runt runtexterna, bärarobjekt samt kopplad information hämtas via K-SAMSÖK
  contact:
    url: https://www.raa.se/kulturarv/runor-och-runstenar/projektet-evighetsrunor/
  version: 0.9.5
servers:
  - description: Uppsala Universitet Evighetsrunor API - TEST
    url: http://runor.test.uu.se/rest/
#  - description: SwaggerHub API Auto Mocking

### Generella implementationsregler i API:et ###
# Regel 1: Arrayer har alltid ett värde.
#  Dvs om ett en array saknar värde så har den noll elemement. Effekten blir att en array kan aldrig ha värdet null.
# Regel 2: Ingående objekt (subobjekt) i en respons har alltid ett värde.
# Dvs om responsen innehåller ett subobjekt "provenance" så är objektet alltid definierat. Subobjekt kan aldrig ha värdet null.

## Angående hur vi tolkar required och nullable ##
# Regel 3: Tolkning av required: Attributet ingår alltid i responseobjektet, oavsett om attributet har ett värde eller ej.
# Specifikation för "required" i ett schemaobject: https://swagger.io/specification/#schemaObject
# Regel 4: Tolkning av nullable: Om ett attribut är deklarerat med värdet Nullable: false så innebär det att attributet alltid förväntas innehålla ett värde.
# Om nullable däremot är true - då ingår alltid variablen i responsen men kan ha värdet null.
# Ex: {"period": null, ...}"
# Defaultvärdet för nullable är false. Så om en variabel inte är deklarerad med "nullable" innebär det att den får värdet false.
# Specifikation för "nullable" i ett schemaobject:  https://swagger.io/specification/#schemaNullable

#### Utestående frågor #####
# Sök efter TODO i detta dokument. Där finns en utestående fråga.
# TODO 1: RAÄ har krav på sig att själva gui:et ska vara tvåspråkigt. Men ska själva datat ska väl inte vara flerspråkigt?! Måste utredas vad som gäller! Att: Rickard
# OM dataposter finns på flera språk, så finns dettydligen finns det ISO koder över namn på länder. RAÄ:s behov är att kunna skriva ut landsnamnet i klartext i gui:et.
# Man skulle kunna tänka sig använda accept header "Accept-Language" generellt i api:et för returnera data på olika språk där det stöds, i det här fallet landsnamnet på "rätt språk".

paths:
  /signums:
    get:
      tags:
        - Enkel sökning
      summary: Hämtar lista med signum
      description: Hämta en lista med signum som kan användas vid enkel sökning (typeahead)
        på signum
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: matching_text
          in: query
          description: Del av signum att matcha mot
          schema:
            type: string
        - name: page
          in: query
          description: Index för önskad resultatsida
          schema:
            type: number
            format: number
        - name: size
          in: query
          description: Storlek på sidor
          schema:
            type: number
            format: number
        - name: sort
          in: query
          description: Attribut som man vill använda föra att sortera svaret, tex "sort=id",
            eller "sort=id,desc" om man vill ha svaret i fallande ordning.
          schema:
            type: string
            format: sort
      responses:
        200:
          description: En lista med signum
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagedSignumResponse'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /places:
    get:
      tags:
        - Enkel sökning
      summary: Hämtar lista med platser
      description: Hämta en lista med platser som kan användas vid enkel sökning (typeahead)
        på plats
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: matching_text
          in: query
          description: Del av namn på plats att matcha mot
          schema:
            type: string
      responses:
        200:
          description: En lista med platser
          content:
            application/json:
              schema:
                type: array
                example:
                  - id: ca79d466-888f-4011-b5bd-35fc6dd1d622
                    name: Abrahamstorp
                  - id: 25a4de16-c421-41ed-8d17-fc465fd03db1
                    name: Ackarby
                  - id: b70ec612-cef6-446d-afc0-4e3387804842
                    name: '...'
                items:
                  $ref: '#/components/schemas/SelectionItem'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /selection/groups:
    get:
      tags:
        - Avancerad sökning
      summary: Hämtar lista med urvalsgrupper
      description: Hämtar lista med urvalsgrupper att användas när man sätter filtervillkor
        för en avancerad sökning
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      responses:
        200:
          description: En lista med urvalsgrupper
          content:
            application/json:
              schema:
                type: array
                example:
                  - id: 161ab23e-7566-43a0-9dbe-c7f237f27765
                    name: Plats
                  - id: d3c41141-ef42-4ef3-9cbb-3d49fa6acffe
                    name: Socken
                  - id: 30ba8d99-f27b-48fc-8048-7892eb3a0fbc
                    name: Härrad
                  - id: b95dc24b-a1f6-4310-8a9e-3d0264f0f53e
                    name: '...'
                items:
                  $ref: '#/components/schemas/SelectionGroup'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /selection/groups/{group_id}:
    get:
      tags:
        - Avancerad sökning
      summary: Hämtar lista med urval
      description: Hämtar lista med urval för en urvalsgrupp att användas när man
        sätter filtervillkor för en avancerad sökning
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: group_id
          in: path
          description: Id för urvalsgrupp
          required: true
          schema:
            type: string
        - name: matching_text
          in: query
          description: Del av namn på urval att matcha mot
          schema:
            type: string
      responses:
        200:
          description: En lista med urval
          content:
            application/json:
              schema:
                type: array
                example:
                  - id: ca79d466-888f-4011-b5bd-35fc6dd1d622
                    name: Abrahamstorp
                  - id: 25a4de16-c421-41ed-8d17-fc465fd03db1
                    name: Ackarby
                  - id: b70ec612-cef6-446d-afc0-4e3387804842
                    name: '...'
                items:
                  $ref: '#/components/schemas/SelectionItem'
        404:
          description: (Not found). Gruppen saknas
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: 404
                message: Gruppen saknas
                path: /selection/12/test
                timestamp: 1990-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /translationtypes:
    get:
      tags:
        - Avancerad sökning
      summary: Hämtar alla översättningstyper
      description: Översättningstyper att använda när en sökfråga sätts samman
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      responses:
        200:
          description: (OK)
          content:
            application/json:
              schema:
                type: array
                example:
                  - id: da0b20c8-e036-456b-8f0a-6aeb06105f9a
                    name: Fornvästnordiska
                    proper_name_searchable: true
                    is_complete: true
                    method: NORMALISERING
                  - id: ca79d466-888f-4011-b5bd-35fc6dd1d623
                    name: Engelska
                    proper_name_searchable: false
                    is_complete: false
                    method: OVERSATTNING
                items:
                  $ref: '#/components/schemas/RunicTextTranslationType'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /search:
    get:
      tags:
        - Enkel sökning
      summary: Enkel sökning. Sök efter runtexter med del av plats eller signum
      description: Söker efter runtexter med del av plats eller signum
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: matching_text
          in: query
          description: Söksträng
          required: true
          schema:
            type: string
        - name: search_field
          in: query
          description: Sökfält
          required: true
          schema:
            type: string
            enum:
              - PLACE
              - SIGNUM
      responses:
        200:
          description: (OK)
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RunicInscription'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      tags:
        - Avancerad sökning
      summary: Avancerad sökning i runtexter enligt sökvillkor
      description: Sök i runtexter enligt kombinerade sökvillkor för text samt filtrering
        enligt urval
      parameters:
        - name: edition_id
          in: path
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      requestBody:
        content:
          '*/*':
            schema:
              $ref: '#/components/schemas/SearchQuery'
        required: true
      responses:
        200:
          description: Hittade runtexter med markering av hittade ord
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SearchResult'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: query
  /map:
    get:
      tags:
        - Karta
      summary: Hämtar alla geografiska punkter
      description: Hämtar alla geografiska punkter där runinskriptioner finns eller
        har hittats
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: bbox
          in: query
          description: |
            Anger koordinater i kommaseparerad lista för spatial utsökning i bboxformat; left,top,bottom,right.
            Exempel 688232.203,6332689.351,713304.203,6345041.351 Koordinatsystem för geometrier förväntas vara WGS84 (EPSG:4326).
          required: true
          schema:
            type: string
      responses:
        200:
          description: (OK). Poster hittades.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RunicInscriptionIndex'
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /inscriptions:
    get:
      tags:
        - Runtexter
      summary: Hämtar en lista med runinskrifter
      description: Hämtar en lista med runinskrifter för en viss utgåva
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: Index för önskad resultatsida
          schema:
            type: number
            format: number
        - name: size
          in: query
          description: Storlek på sidor
          schema:
            type: number
            format: number
        - name: sort
          in: query
          description: Attribut som man vill använda föra att sortera svaret, tex "sort=id",
            eller "sort=id,desc" om man vill ha svaret i fallande ordning.
          schema:
            type: string
            format: sort
      responses:
        200:
          description: (OK). Posten hittades.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PagedRunicInscriptionResponse'
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
                
  /inscriptions/{id}:
    get:
      tags:
        - Runtexter
      summary: Hämtar en runinskrift med hjälp av signum eller URI
      description: Hämtar en runinskrift med hjälp av signum eller URI
      parameters:
        - in: path
          name: id
          description: Anger identiteten till inskriften (uuid).
          required: true
          schema:
            type: string
            format: uuid
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      responses:
        200:
          description: (OK). Post hittades
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunicInscription'
        404:
          description: (Not found). Ingen träff
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: 404
                message: Signum eller URI saknas
                path: /selection/12/test
                timestamp: 1990-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /editions:
    get:
      tags:
        - Utgåva
      summary: Hämtar en lista med utgåvor
      description: Hämtar en lista med utgåvor
      responses:
        200:
          description: (OK). Poster hittades
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Edition'
        404:
          description: (Not found). Ingen träff
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: 404
                message: Utgåvor saknas
                path: /editions
                timestamp: 2001-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /editions/{edition_id}/download:
    get:
      tags:
        - Utgåva
      summary: Hämtar all data i en utgåva
      description: 'Hämtar en fil som innehåller all data i en utgåva av SRD. TODO bestämma vilket format som returneras.'
      parameters:
        - name: edition_id
          in: path
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      responses:
        200:
          description: (OK). Poster hittades
          content: {}
        404:
          description: (Not found). Ingen träff
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/Error'
            application/json:
              example:
                status: 404
                message: Utgåva saknas
                path: /editions/1987
                timestamp: 2018-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/Error'

  /echo/{message}:
    get:
      summary: Tjänst avsedd för att utföra sambandstest. Tjänsten returnerar det argument soma angavs som inparameter i anropet.
      parameters:
        - in: path
          name: message
          description: Värdet för det 'eko' som ska returneras tillbaka till klienten.
          required: true
          schema:
            type: string
            example: "Hurra! Anropet lyckades."
      responses:
        '200':
          description: (OK). Ett json-objekt med attributet 'echo' returneras.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Echo'
        '500':
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      tags:
        - Övriga tjänster
components:
  schemas:
    Cross:
      type: object
      description: Objektrepresentation av ett kors. Beskriver hur korsets olika delar ser ut enligt ett schema skapat av Linn Lager.
      properties:
        crosshape:
          $ref: '#/components/schemas/Crossform'

    Crossform:
      type: object
      description: JSON-representation av korsformer. Beskriver hur korsets olika delar ser ut enligt ett schema skapat av Linn Lager.
      properties:
        aspect:
          description: Anger raden - dvs "versalen" för en korsform. Korsets övergripande form.
          type: string
          example:
            C
        form:
          description: Anger kolumnen - dvs "siffran" för en korsform. Anger hur delen av ett kors ser ut.
          type: string
          example:
            3

    Echo:
      type: object
      description: Objekt för att representera svaret till echo-tjänsten.
      properties:
        echo:
          description: Anger värdet som som skickades in till tjänsten.
          type: string
          example: Hurra! Tjänsten svarar. Anropet lyckades.
    Edition:
      required:
        - id
      type: object
      properties:
        id:
          type: string
          description: Identitet på utgåvan
          example: "2018"
        name:
          type: string
          description: Namn på utgåvan
          example: 2018 års utgåva av Samnordisk runtextdatabas
        latest:
          type: boolean
          description: Anger om utgåvan är den aktuella (senast utgivna)
          example: true
        download:
          type: string
          description: Anger URL för att ladda ner all data i en utgåva
          example: /editions/2018/download
      description: En utgåva (version) av SRD

    Error:
      required:
        - message
        - path
        - status
        - timestamp
      type: object
      properties:
        status:
          type: integer
          description: Http statuskod
          example: 500
        message:
          type: string
          description: Innehåller ett felmeddelande tänkt att presenteras för slutanvändare
          example: Tekniskt fel, försök senare
        exception:
          type: string
          description: Innehåller ett felmeddelande tänkt för tekniker vid felsökning
          example: java.lang.NullPointerException
        path:
          type: string
          description: Anger den resourcepath där felet uppstod
          example: /selection/13/Test
        timestamp:
          type: string
          description: Anger tidpunkten när felet inträffade. Tidpunkt angiven som
            date-time, se RFC3339 (Internet Date/Time Format)
          format: dateTime
          example: 2019-01-04T23:59:60Z
      description: Ett fel

    Geometry:
      type: object
      description: |
        Objektrepresentation av en geografisk position uttryckt enligt GeoJSON[2016] specificatioenen. Se https://tools.ietf.org/html/rfc7946.
        Notera att koordinatsystemet för angivna koordinater är uttryckta i WGS84 (EPSG:4326). Se: https://tools.ietf.org/html/rfc7946#section-4
        "The coordinate reference system for all GeoJSON coordinates is a geographic coordinate reference system, using the World Geodetic System 1984 (WGS 84) [WGS84] datum,
        with longitude and latitude units of decimal degrees.
        This is equivalent to the coordinate reference system identified by the Open Geospatial Consortium (OGC) URN urn:ogc:def:crs:OGC::CRS84."
      properties:
        type:
          description: |
            Anger tillåtna koordinattyper för geometrin.
          type: string
          enum:
            - Point
          example: Point
        coordinates:
          description: |
            Anger koordinater för geometrin. Exemplet uttryckt enligt longitude, latitude.
            Se: https://tools.ietf.org/html/rfc7946#appendix-A.1
            "Point coordinates are in x, y order (easting, northing for projected coordinates, longitude, and latitude for geographic coordinates)".
          type: array
          items:
            type: number
            example: "18.31511, 57.159624"

    Interpretation:
      type: object
      description: Objektrepresentation av en Interpretation (transliterering).
      properties:
        text:
          description: Anger transliterering av en text
          type: string
          nullable: true
          example: Bengt lät resa denna sten efter sin moder...  (på fornnordiska)
        language:
          type: string
          nullable: true
          description: Anger språket som translitterering är uttryckt i.
          example: Fornvästnordiska.

    Nmr:
      type: object
      description: Objektrepresentation av National Monument Registers (NMR) identifierare kopplade till inskriftsbäraren i andra informationssystem.
      properties:
        country:
          description: Anger vilket land de kopplade NMR-identiteterna tillhör.
            Danmark, Skottland, Norge, Sverige
          type: string
          enum:
            - dk
            - gb_sc
            - no
            - se
          example: se
        identifiers:
          description: Array över nmr-identiteter.
          type: array
          items:
            $ref: '#/components/schemas/NmrIdentifier'

    NmrIdentifier:
      type: object
      description: Objektrepresentation av en nyckel-värde par för en nmr-identifiere.
      properties:
        key:
          description: Anger typen av nmr-identitet.
          type: string
          example: fmisid
        value:
          description: Anger värdet för nmr-identiteten.
          type: string
          example: abc123

    Material:
      type: object
      required:
        - material
        - materialtype
      description: Objektrepresentation av en materialförekomst för inskriftsbärare.
      properties:
        material:
          description: Anger det material som inskriftsbäraren består av.
          type: string
          example: granit
        materialtype:
          description: Anger typen i form av grov indelning av det material som inskriftsbäraren består av.
          type: string
          example: sten

    PagedSignumResponse:
      type: object
      properties:
        signum:
          description: Innehåller lista av framsökta signum.
          type: array
          items:
            type: string
          example:
            - Öl 4 $
            - Öl Fv1911;274 B $
            - '...'
        #          items:
        #            $ref: '#/components/schemas/Signum'
        totalpages:
          type: integer
          description: Totalt antal sidor som kan hämtas
          example: 84
        totalElements:
          type: integer
          description: Totalt antal objekt som kan hämtas
          example: 8345
        last:
          type: boolean
          description: Anger om aktuell sida är den sista
          example: false
        sort:
          type: string
          description: Anger vilken sortering som använts
          example: sort=id
        first:
          type: boolean
          description: Anger om aktuell sida är den första
          example: true
        numberOfElements:
          type: integer
          description: Antal objekt i aktuellt svar
          example: 100
        size:
          type: integer
          description: Anger antal objekt per sida
          example: 100
        number:
          type: integer
          description: Sidnummer
          example: 0
      description: Paginerat svar med signum
    PagedRunicInscriptionResponse:
      type: object
      properties:
        content:
          type: array
          description: Runinskrifter
          items:
            $ref: '#/components/schemas/RunicInscription'
        totalpages:
          type: integer
          description: Totalt antal sidor som kan hämtas
          example: 84
        totalElements:
          type: integer
          description: Totalt antal objekt som kan hämtas
          example: 8345
        last:
          type: boolean
          description: Anger om aktuell sida är den sista
          example: false
        sort:
          type: string
          description: Anger vilken sortering som använts
          example: sort=id
        first:
          type: boolean
          description: Anger om aktuell sida är den första
          example: true
        numberOfElements:
          type: integer
          description: Antal objekt i aktuellt svar
          example: 100
        size:
          type: integer
          description: Anger antal objekt per sida
          example: 100
        number:
          type: integer
          description: Sidnummer
          example: 0
      description: Paginerat svar med runinskription

    Profilestyle:
      description: Objektrepresentation som anger med vilken profilstil som inskriftsbäraren är ristad. Används bara om inskriftsbäraren är en runsten.
      type: object
      properties:
        style:
          description: Anger med vilken profilstil som inskriftsbäraren är ristad.
          type: string
          example: Pr3
        certainty:
          description: Anger säkerhetsfaktorn för bedömningen. "Det här är definitivt profilstil 2"
          type: boolean
          example: true

    Provenance:
      type: object
      description: Objektrepresentation av en runinskrifts lokaliseringsinformation.
      properties:
        place:
          description: Anger platsen för var inskriftsbäraren ursprungligen kommer från.
          type: string
          example: Resmo kyrka
        parish:
          description: Anger ev. namn på socken där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Bro socken
        old_parish:
          description: Anger ev. tidigare namn på socken där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Bro socken
        hundred:
          description: Anger ev. namn på härad där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Vallentuna hd
        province:
          description: Anger ev. namn på landskap där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Västra götaland
        county:
          description: Anger ev. namn på län där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Gotland
        municipality:
          description: Anger ev. namn på kommun där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Rättvik
        country:
          description: Anger ev. namn på land där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Sverige

    OriginalLocation:
      description: Grundinformation om en inskriftsbärares ursprungliga placering.
      type: object
      properties:
        original:
          description: Beskriver om inskriftsbäraren har kvar sin ursprungliga placering eller ej.
            Notera att värdet är trinärt! Dvs det kan anta tre värden. False, true respektive null.
            Null innebär att värdet är okänt.
          type: boolean
          nullable: true
          example: false
        text:
          description: Anger ev. beskrivningstext för inskriftsbärarens ursprungliga placering.
          type: string
          nullable: true
          example: "200 m sydöst om nuvarande position."

    # TODO - Överväg byt namn - lär finnas på wikin. Marcus återkommer.
    RunicInscription:
      description: Grundinformation för en runinskription.
      type: object
      properties:
# TODO Peter - ok att kalla den för inscription_id? - mindre anonymt än "id"
        inscription_id:
          type: string
          format: uuid
          description: Anger identiteten (uuid) till runinskriften.
          example: ccf0a7f9-1f4c-421f-a321-0e36daea43eb
        uri:
          description: Persistent identifierare för det sammansatta objektet (runinskrift + bärare av runinskriften) (används för att hämta information från K-SAMSÖK)
          type: string
          example: http://kulturarvsdata.se/uu/srdb/7b70c89a-c191-4d73-4455fd5dd2a7
        signum1:
          description: Anger den första identitetsdelen för runinskriften, s.k signum.
            Platsbaserad. Oftast landskapskoden där runstenen hittades. Sätts samman med attribut 'signum 2'
          type: string
          example: Öl
        signum2:
          description: Anger den andra identitetssdelen för runinskriften, s.k signum.
            Anger oftast runinskriftens numrering inom platsbaserade delen. Sätts samman med attribut 'signum 1'
          type: string
          example: 10
        alternative_signa:
          description: Alternativa signa.
          type: array
          items:
            type: string
          example:
            - Liljegren 1588
            - Liljegren 1589
            - BN 4
        extant:
          description: Anger om inskriftsbäraren existerar eller ej.
          type: boolean
          example: true
        placement:
          description: Anger var inskriftsbäraren finns belägen.
          type: string
          nullable: true
          example: Kalmar läns museum (KLM 24962)
        original_location:
          $ref: '#/components/schemas/OriginalLocation'
        position:
          # Anger geografisk information om inskriftsbärarens position.
          $ref: '#/components/schemas/RunicInscriptionGeoPosition'
        provenance:
          $ref: '#/components/schemas/Provenance'
        crosses:
          description: Array av kors.
          type: array
          items:
            $ref: '#/components/schemas/Cross'
        artefact:
          description: Anger vilken typ av föremål inskriftsbäraren är av.
          nullable: true
          type: string
          example: runsten
        runictypes:
          description: Anger vilka typer av runor som använts i inskriften.
          type: array
          items:
            $ref: '#/components/schemas/RunicType'
# TODO Peter - överväg att lägga till runictypedescription?!
        period:
          description: Anger vilken konvention som använts vid skapandet av läsningen av inskriften.
            Är i praktiken även en grov tidsangivelse för inskriften.
          type: string
          nullable: true
          example: Vikingatid
        material:
          $ref: '#/components/schemas/RunicMaterial'
        carver:
          description: Anger vem som ristat inskriften.
          type: string
          nullable: true
          example: 'Torsten (A) [Källström 2007a:269]'
        profilestyle:
          description: Anger med vilken profilstil som inskriftsbäraren är ristad. Används bara om inskriftsbäraren är en runsten.
          type: array
          items:
            $ref: '#/components/schemas/Profilestyle'
        nmr_identifier:
          #  Identifierare för objekt som motsvarar inskriftsbäraren i andra informationssystem (National Monument Registers).
          $ref: '#/components/schemas/Nmr'
        notes:
          description: Fritextfält för beskrivning av inskriftsbäraren.
          type: array
          items:
            type: string
          example: Parsten till Sö 35.
        runictexts:
          description: Array of translations of the runicinscription.
          type: array
          items:
            $ref: '#/components/schemas/RunicText'
        ornamental:
            description: Anger huruvida objektet är ornamentantalt eller ej. Om sant - så finns inga runor, bara ornament.
            type: boolean
            example: true
        image_links:
          description: Innehåller array av URL:er till bilder av objektet. Url:erna finns lagrade i SRD databas och skördas ej till K-samsök.
          type: array
          items:
            type: string
          example:
            - >-
              http://kmb.raa.se/cocoon/bild/raa-image/16000300012834/normal/1.jpg
        references:
          description: Innehåller array av referenser till objektet. Referenserna finns lagrade i SRD databas och skördas ej till K-samsök.
          type: array
          items:
            type: string
          example:
            - 'Fv 1975:170'
            - 'http://fornvannen.se/pdf/1970talet/1975_166.pdf'
            - 'Andersson 1998b'

    RunicMaterial:
      type: object
      properties:
        material_free_text:
          nullable: true
          description: Fritextfält som anger det material som inskriftsbäraren består av. Fältet är ostrukturerat.
          type: string
          example: granit
        materials:
          description: Array över de material som inskriftsbäraren består av. En inskriftsbärare kan bestå av flera material.
            Attributet är en strukturerad representation av attributet 'material_fritext' ovan.
          type: array
          items:
            $ref: '#/components/schemas/Material'

    RunicText:
      type: object
      description: Objektrepresentation av en inskriftsversion.
      properties:
       reading:
          description: Anger läsningen av texten
          type: string
          example: '...-abi · þaiR --tu · raisa · stein- · eftiR · rantui · moþor sina'
       reference:
         description: Anger bokstav som identifierar vilken alternativ tolkning olika runologer har haft.
         type: string
         nullable: true
         example: 'P'
       interpretations:
         description: Array av runinskriftens tolkningar. "Snygga till stavningen".
         type: array
         items:
           $ref: '#/components/schemas/Interpretation'
       translations:
         description: Array av runinskriftens översättningar.
         type: array
         items:
           $ref: '#/components/schemas/Translation'

    RunicTextTranslationType:
      required:
        - id
        - is_complete
        - method
        - name
        - proper_name_searchable
      type: object
      properties:
        id:
          type: string
          description: Id för översättningstypen
          example: da0b20c8-e036-456b-8f0a-6aeb06105f9a
        name:
          type: string
          description: Namn på översättningstypen
          example: Fornvästnordiska
        proper_name_searchable:
          type: boolean
          description: Anger om texter av denna översättningstyp har sökbara egennamn
          example: true
        is_complete:
          type: boolean
          description: Anger om texter av denna översättningstyp är kompletta
          example: true
        method:
          type: string
          description: Anger översättningsmetod
          example: NORMALISERING
          enum:
            - NORMALISERING
            - TRANSLITERERING
            - OVERSATTNING
      description: Översättningstyp, transliterering/normalisering/översättning av en runtext

    RunicInscriptionGeoPosition:
      description: Objektrepresentation av en inskriftsbärares geografiska positioner med nuvarande och ev. ursprungligt läge att rendera på en bakgrundskarta
      type: object
      properties:
        current:
          # Anger inskriftsbärarens senaste kända (oftast nuvarande) position
          $ref: '#/components/schemas/Geometry'
        oldest_known:
          # Anger inskriftsbärarens äldsta kända position
          $ref: '#/components/schemas/Geometry'

    RunicInscriptionIndex:
      description: Objektrepresentation i "index" format av en inskriftsbärares signifikanta attribut.
        Innehåller geografiska positioner med nuvarande och ev. ursprungligt läge att rendera på en bakgrundskarta.
      type: object
      properties:
        inscription_id:
          description: Anger identiteten (uuid) till runinskriften.
          type: string
          format: uuid
          example: ccf0a7f9-1f4c-421f-a321-0e36daea43eb
        uri:
          description: Anger persistent identitet (uri) för runinskriften.
          type: string
          example: http://kulturarvsdata.se/uu/srdb/7b70c89a-c191-4d73-4455fd5dd2a7
        signum:
          description: Anger ett komplett signum bestående av signum1 + signum2.
          type: string
          example: Öl 10
        parish:
          description: Anger ev. namn på socken där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Bro socken
        current:
          # Anger inskriftsbärarens senaste kända (oftast nuvarande) position
          $ref: '#/components/schemas/Geometry'
        oldest_known:
          # Anger inskriftsbärarens äldsta kända position
          $ref: '#/components/schemas/Geometry'

    RunicType:
      description: Anger vilka typer av runor som använts i inskriften.
      type: object
      properties:
        type:
          type: string
          description: Anger typ av runinskrift.
          nullable: true
          example: Skiffer
        category:
          type: string
          description: Anger kategori av runinskrift.
          nullable: true
          example: Spegelvända kvistrunor

    SearchResult:
      required:
        - inscription
      type: object
      properties:
        inscription:
          type: array
          description: Runinskrifter
          items:
            $ref: '#/components/schemas/RunicInscription'
        found_words_index:
          type: array
          example:
            - 0
            - 4
            - 6
          items:
            type: integer
      description: Resultat av en sökfråga

    SearchQuery:
      required:
        - query
      type: object
      properties:
        query:
          type: array
          description: Textsökfråga
          items:
            $ref: '#/components/schemas/TextQueryGroup'
        filter:
          type: array
          description: Filtrering
          items:
            $ref: '#/components/schemas/Selection'
      description: Sökfråga som används för att sätta sökvillkor vid avancerad sökning
        i SRD
    SelectionGroup:
      required:
        - id
        - name
      type: object
      properties:
        id:
          type: string
          description: Identitet för urvalsgruppen
          example: b86b72cb-bc22-45fc-90cb-eaf213d3aaf9
        name:
          type: string
          description: Namn på urvalsgruppen
          example: Socken
      description: Urvalsgrupp (tex Föremål, Korsform, Material etc)
    SelectionItem:
      required:
        - id
        - name
      type: object
      properties:
        id:
          type: string
          description: Identitet för urvalet
          example: c387aad1-9b4b-4c8c-ad0d-0bb4eaf605d6
        name:
          type: string
          description: Namn på urval
          example: Bro
      description: Ett urval (tex socken Bro)
    Selection:
      required:
        - item
        - op
      type: object
      properties:
        op:
          type: string
          description: Logisk operator att användas när filter kombineras
          enum:
            - AND
            - NOT
        item:
          $ref: '#/components/schemas/SelectionItem'
      description: Kompletterande filter med urvalsgrupper

    TextQueryGroup:
      required:
        - condition
      type: object
      properties:
        op:
          type: string
          description: Anger logisk operator för användas när flera sökfrågor kombineras.
            Första frågan i en TextQueryGroup behöver inte ha en logisk operator
          enum:
            - AND
            - OR
            - NOT
        condition:
          type: array
          items:
            $ref: '#/components/schemas/TextQuery'
      description: Gruppering (tänk parenteser) av sökvillkor i en avancerad sökfråga
    TextQuery:
      required:
        - matching_text
        - proper_name_search
      type: object
      properties:
        op:
          type: string
          description: Anger logisk operator för användas när flera sökfrågor kombineras.
            Första frågan i en TextQuery behöver inte ha en logisk operator
          enum:
            - AND
            - OR
            - NOT
        matching_text:
          type: string
          description: Söktext
          example: þaiR
        proper_name_search:
          type: string
          description: Anger hur/om sökning skall ske i egennamn
          enum:
            - INCLUDE
            - EXCLUDE
            - ONLY
        translation_type_id:
          type: string
          description: Anger i vilken översättning sökningen skall ske
          example: da0b20c8-e036-456b-8f0a-6aeb06105f9a
      description: Sökfråga som används för att sätta villkor för textsökning i SRD

    Translation:
      type: object
      description: Objektrepresentation av en transliterering.
      properties:
        translation:
          description: Anger ev. översättning av texten
          type: string
          nullable: true
          example: Bengt raised this stone...
        transliteration_language:
          description: Anger språket som översättningen är uttryckt i.
          type: string
          nullable: true
          example: Engelska

    Runtext-old:
      type: object
      description: JSON-representation av en Runtext.
      properties:
        runtext:
          description: Namn på socken.
          type: string
          example: >-
            : eimunr : auk : kuna- ... þeiR · -uku · kirþu · þisn · eftiR : kinu
            : fatran
        fornvastnordisk:
          description: Namn på socken.
          type: string
          example: '<...-abi> þeir [lé]tu reisa stein[a] eptir "Randvé, móður sína.'
        nationellt_fornsprak:
          description: Namn på socken.
          type: string
          example: '<...-abi> þæiR [le]tu ræisa stæin[a] æftiR "Randvi, moður sina.'
        engelska:
          description: Namn på socken.
          type: string
          example: >-
            <...-abi> they had the stones raised in memory of Randvé, their
            mother.

  parameters:
    editionParameter:
      name: edition_id
      in: query
      description: Id för önskad utgåva
      required: true
      schema:
        type: string
      example: 2020
    pageParameter:
      name: page
      in: query
      description: Index för önskad resultatsida
      schema:
        type: number
        format: number
      example: 0
    sizeParameter:
      name: size
      in: query
      description: Storlek på sidor
      schema:
        type: number
        format: number
      example: 10
    sortParameter:
      name: sort
      in: query
      description: Attribut som man vill använda föra att sortera svaret, tex "sort=id",
        eller "sort=id,desc" om man vill ha svaret i fallande ordning.
      schema:
        type: string
        format: sort
